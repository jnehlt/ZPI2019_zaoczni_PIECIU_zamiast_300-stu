language: android
dist: trusty
jdk: oraclejdk8
before_deploy:
- git config --global user.email "builds@travis-ci.com"
- git config --global user.name "Travis CI"
- export GIT_TAG=1.3.$TRAVIS_BUILD_NUMBER
- git tag $GIT_TAG -a -m "Generated tag from TravisCI for build $TRAVIS_BUILD_NUMBER"
deploy:
  provider: releases
  user: jnehlt
  password:
    secure: wN/26H/C/NUPcSCJdyrSbhI7KlBS+/qOOgj5RQ7Yoq3c3xyC3NmpzRm71ymeCsfnjZj7gO/Yb23ruTwK5NIPYPAiydqYc96jsYmS6oQXRjab8WCgh5FeFajU3CKGQMh7tJb/GkDc5Pj0C/QBUnaU/UmdFkI34mqm15ieRLhtnfMXRTD17iX/RVP5otOZC+rD59F4OWnxeQCuyY/Y1NVU96OATTayHGPTquIqbkbNexnjYlGXjc9XPe4UiZRlWpVdvpLtVOGlPqu4pVsSl23er+9O0aSu525TW4Rpt9yoclfPqPeoHB9g5BQHE3yI+jwWBwcWtpIPb1P2q2FZN2jcmGXI9S8SeJM8+XCCNDrY/SdMQN0PvSgK7QLfu8Dikn1ASE9bsWPIj9diqt/3QlDp4k4Yx2o4LzxDEFBrUFoAoGBRbOVoXiCQSCXUVzbgd1xwLHqKY6DrZQmX1Pga5XNPYmQT3n5ix83uHWYYckaL0ttubKs2DYqMXublP1Sf7ZDJ2TT3Kt7BNW5x4tck944XjqCFeVMxK7or/Ovr33uWAKpak4QSGZBAZkMFuGytgyN+XCbiejAwsZ2Dwo8Cy7jv1C2oPP7mBxPTWfJnDTDFwTa33cEmh/kK6FhTGVlBkBWhxQ7pS/ATQZUUUHGvwzjhpdLYdoxHuHoSN7iIpZ5vNQs=
  file: "./*.apk"
  skip_cleanup: true
  on:
    branch:
    - CI_CD_improvements
    - develop
matrix:
  fast_finish: true
  include:
  - name: DUMMY apk
    script:
    - touch ./test.apk
    - "./prepare_apk_name.sh"
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - ".autoconf"
  - "$HOME/.m2"
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
