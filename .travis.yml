language: android
dist: trusty
jdk: oraclejdk8
before_deploy:
- git config --global user.email "builds@travis-ci.com"
- git config --global user.name "Travis CI"
- export GIT_TAG=1.3.$TRAVIS_BUILD_NUMBER
- git tag $GIT_TAG -a -m "Generated tag from TravisCI for build $TRAVIS_BUILD_NUMBER"
deploy:
  provider: releases
  user: jnehlt
  password:
    secure: IL2CZY4SiTaYaI95NJoMR2QVwTg/gUcfOacUoKX8TeVG+TGgtSsJKgBN8xnvXSZ+1NXy/JengMaH47LnfhjDWKoBfP/qnODFNxMuX3ozTQDlTbX3HX9ZiQJGYbKvan3mw1z+woJ1qIBACgEXp6beZROtRD0oMyAXQkxXAZ3KN/+0Twh3c92i4PgmRNBqPA6Fx9v4DSIHG1opXH/ShQkwsUPpVa2MToqu9sLrZENruhmVG0kSqfTzwy0lIfqmWZMdFN83f8r/Qs6veifDal09Y2g5sWWWIVh/V6GDqvmdbpthJrYplkLh9F8Ry78oi+WL4Xxq9kRxT22rWpAQDdHxKZSD6yyx6KJ0fADRf4QwUzOBobT6x5J70GqVn+SPPm/Gtxv/HpxRH+3fWDX6oQo6bSoq4ar1ZLRiEwHTR0/r/2zBQGmY/SKT2+/faBgmTCVh3ub7rhJmnPiHNx77Fn7bhw2slaTH6o+BFjSEZc3x41SRHbe43n2AHjo7jOD0h7kgjskeWjhGklRGdowXDlJIEepXcGP5sNI/Hr6drksF6D9TO9MSSK8mjK3qFc7/l8m9KdFAlbPjjZB9DqallxMEvS4X7R5rIc9bxESnRMjJVmgVuY7zALbOljk14E+hHsfCfst4B9+gHSRqf86338hvCPxDG6bSQB3s7YqY1lkiNTw=
  file: "./*.apk"
  skip_cleanup: true
  on:
    branch:
    - CI_CD_improvements
    - develop
matrix:
  fast_finish: true
  include:
  - name: DUMMY apk
    script:
    - touch ./test.apk
    - "./prepare_apk_name.sh"
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - ".autoconf"
  - "$HOME/.m2"
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
